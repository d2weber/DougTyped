<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1" name="viewport" />
  <meta content="#ffffff" name="theme-color" />
  <meta content="#da532c" name="msapplication-TileColor" />

  
  
  
  
  

  <link href="https://cdnjs.cloudflare.com/ajax/libs/galleria/1.6.1/themes/folio/galleria.folio.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">
  <link href='https://api.mapbox.com/mapbox-gl-js/v2.4.1/mapbox-gl.css' rel='stylesheet' />
  <link href="https://use.fontawesome.com/releases/v5.15.4/css/all.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css" rel="stylesheet" />
  <link href="https://d2weber.github.io/DougTyped/deep-thought.css" rel="stylesheet" />

  <title>
    
DougTyped | Dotfiles under control

  </title>

  

  
</head>

<body class="has-background-white">
  <nav aria-label="section navigation" class="navbar is-light" role="navigation">
    <div class="container">
      <div class="navbar-brand">
        <a class="navbar-item is-size-5 has-text-weight-bold" href="https:&#x2F;&#x2F;d2weber.github.io&#x2F;DougTyped">DougTyped</a>
        <a aria-expanded="false" aria-label="menu" class="navbar-burger burger" data-target="navMenu" role="button">
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
        </a>
      </div>
      <div class="navbar-menu" id="navMenu">
        <div class="navbar-end has-text-centered">
          
          
          
          <a class="navbar-item has-text-weight-semibold" href="https:&#x2F;&#x2F;d2weber.github.io&#x2F;DougTyped&#x2F;">
            Home
          </a>
          
          <a class="navbar-item has-text-weight-semibold" href="https:&#x2F;&#x2F;d2weber.github.io&#x2F;DougTyped&#x2F;posts">
            Posts
          </a>
          
          <a class="navbar-item has-text-weight-semibold" href="https:&#x2F;&#x2F;d2weber.github.io&#x2F;DougTyped&#x2F;tags">
            Tags
          </a>
          
          <a class="navbar-item has-text-weight-semibold" href="https:&#x2F;&#x2F;d2weber.github.io&#x2F;DougTyped&#x2F;categories">
            Categories
          </a>
          
          
          
          <a class="navbar-item" id="nav-search" title="Search" data-target="#search-modal">
            <span class="icon">
              <i class="fas fa-search"></i>
            </span>
          </a>
          <a class="navbar-item" id="dark-mode" title="Switch to dark theme">
            <span class="icon">
              <i class="fas fa-adjust"></i>
            </span>
          </a>
        </div>
      </div>
    </div>
  </nav>

  
<section class="section">
  <div class="container">
    <div class="columns">
      <div class="column is-8 is-offset-2">
        <article class="box">
          <h1 class="title">
            Dotfiles under control
          </h1>
          <p class="subtitle"></p>
          <div class="columns is-multiline is-gapless">
            <div class="column is-8">
              
<span class="icon-text has-text-grey">
  <span class="icon">
    <i class="fas fa-user"></i>
  </span>
  <span>Douglas published on</span>
  <span class="icon">
    <i class="far fa-calendar-alt"></i>
  </span>
  <span><time datetime="2021-11-11">November 11, 2021</time></span>
</span>

            </div>
            <div class="column is-4 has-text-right-desktop">
              
<span class="icon-text has-text-grey">
  <span class="icon">
    <i class="far fa-clock"></i>
  </span>
  <span>3 min,</span>
  <span class="icon">
    <i class="fas fa-pencil-alt"></i>
  </span>
  <span>463 words</span>
</span>

            </div>
            <div class="column">
              
              
<p>
  Categories:
  
  <a class="has-text-info-dark has-text-weight-semibold" href="https://d2weber.github.io/DougTyped/categories/setup/">
    <span class="icon-text">
      <span class="icon">
        <i class="fas fa-cube"></i>
      </span>
      <span>Setup</span>
    </span>
  </a>
  
</p>

              
            </div>
            <div class="column has-text-right-desktop">
              
              
<p>
  Tags:
  
  <a class="has-text-info-dark has-text-weight-semibold" href="https://d2weber.github.io/DougTyped/tags/dotfiles/">
    <span class="icon-text">
      <span class="icon">
        <i class="fas fa-tag"></i>
      </span>
      <span>dotfiles</span>
    </span>
  </a>
  
  <a class="has-text-info-dark has-text-weight-semibold" href="https://d2weber.github.io/DougTyped/tags/configuration/">
    <span class="icon-text">
      <span class="icon">
        <i class="fas fa-tag"></i>
      </span>
      <span>configuration</span>
    </span>
  </a>
  
  <a class="has-text-info-dark has-text-weight-semibold" href="https://d2weber.github.io/DougTyped/tags/git/">
    <span class="icon-text">
      <span class="icon">
        <i class="fas fa-tag"></i>
      </span>
      <span>git</span>
    </span>
  </a>
  
</p>

              
            </div>
          </div>
          <div class="content mt-2">
            <p>Recently I read a post about storing dotfiles in a git repository and I really
liked some of the ideas. Inspired by the post I came up with a similar, very
simple method for versioning my dotfiles, which I think is worth sharing.</p>
<span id="continue-reading"></span>
<p>I missed autocompletion of git command when using the method in the
aforementioned <a href="https://www.atlassian.com/git/tutorials/dotfiles">post</a>, so I
prefer the method described in this post. What makes it elegant in my eyes:</p>
<ul>
<li>Very fast and simple setup</li>
<li>No additional software required besides git</li>
<li>Comfortable usage via alias <code>git dotfiles</code></li>
</ul>
<blockquote>
<p>Note that this method is only meant to work for files within the home
directory. In theory, it can also be used for system configuration files, but
keep in mind that it can be dangerous. For example if you break your
<code>/etc/fstab</code>, your system won't boot anymore.</p>
</blockquote>
<h2 id="why-bare">Why bare?</h2>
<p>We will be using a bare git repository to track our configurations. The naive
way to track the files would be to use a normal repository with its root in the
home directory. That approach however has the disadvantage that whenever you
are in a non-git directory within your home directory, git will think it's
working on your configuration repository. This is because whenever you run a
normal git command, git traverses the directory tree until it finds a git
work-tree. This behaviour can be confusing. You can find some explanation on
what bare means by looking for <code>--bare</code> in these <a href="https://www.git-scm.com/docs/git-clone">git docs</a>.</p>
<h2 id="configuring-repository-with-git-alias">Configuring repository with git alias</h2>
<p>To initialize the repository run:</p>
<pre><code>git init --bare ~&#x2F;dotfiles.git
</code></pre>
<p>It creates a directory <code>~/dotfiles.git</code> with a bare git repository, where the
name <code>dotfiles.git</code> is arbitrary.</p>
<p>To be able to perform git operations on the configurations repo regardless of
the current working directory, we will be using a git alias:</p>
<pre><code>git config --global alias.dotfiles &#x27;!git --git-dir=$HOME&#x2F;dotfiles.git&#x2F; --work-tree=$HOME&#x27;
</code></pre>
<p>You can choose the name of the alias (here <code>dotfiles</code>) as you like. The
parameters <code>git-dir</code> and <code>work-tree</code> are set to the respective paths. Because
we are using the <code>$HOME</code> environment variable, the preceding <code>!git</code> is
required.</p>
<p>We configure our dotfiles-repository to not show untracked files, because most
of the home directories content will not be under version control. Otherwise
the output of git status would be cluttered.</p>
<pre><code>git dotfiles config --local status.showUntrackedFiles no
</code></pre>
<p>And that's all we had to do. Now we can perform git commands like this:</p>
<pre><code>git dotfiles add .gitconfig
git dotfiles commit -m &#x27;Add gitconfig&#x27;
</code></pre>
<p>Since we are using a git alias, all commands (including other git aliases) will
work as if using a normal git command, even autocompletion will be available. I
hope you are exited as me about this simple method!</p>

          </div>
        </article>
      </div>
      
    </div>
  </div>
</section>


  
  <section class="modal" id="search-modal">
    <div class="modal-background"></div>
    <div class="modal-card">
      <header class="modal-card-head">
        <p class="modal-card-title">Search</p>
      </header>
      <section class="modal-card-body">
        <div class="field mb-2">
          <div class="control">
            <input class="input" id="search" placeholder="Search this website." type="search" />
          </div>
        </div>
        <div class="search-results">
          <div class="search-results__items"></div>
        </div>
      </section>
    </div>
    <button aria-label="close" class="modal-close is-large"></button>
  </section>
  


  

<section class="section">
  <div class="container">
    <div class="columns is-centered">
      <div class="column is-8">
        <nav class="level">
           
          <div class="level-item has-text-centered">
            <a class="button is-black is-outlined" href="https:&#x2F;&#x2F;d2weber.github.io&#x2F;DougTyped&#x2F;posts&#x2F;starting-a-blog-with-zola&#x2F;">
              Starting a blog with Zola<span class="icon ml-2">
                <i class="fas fa-arrow-circle-right"></i>
              </span>
            </a>
          </div>
            
        </nav>
      </div>
    </div>
  </div>
</section>



  



  <footer class="footer py-4">
    <div class="content has-text-centered">
      <p>
        Built with
        <span class="icon-text">
          <span class="icon">
            <i class="fas fa-code"></i>
          </span>
          <span>code</span>
        </span>
        and
        <span class="icon-text">
          <span class="icon">
            <i class="fas fa-heart"></i>
          </span>
          <span>love</span>
        </span>
      </p>
      <p>
        Powered by
        <span class="icon-text">
          <span class="icon">
            <i class="fas fa-power-off"></i>
          </span>
          <span>zola</span>
        </span>
      </p>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/galleria/1.6.1/galleria.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mermaid@8.9.2/dist/mermaid.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.xkcd@1.1.13/dist/chart.xkcd.min.js"></script>
  <script src='https://api.mapbox.com/mapbox-gl-js/v2.4.1/mapbox-gl.js'></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/galleria/1.6.1/themes/folio/galleria.folio.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/elasticlunr/0.9.6/elasticlunr.min.js"></script>
  <script src="https://d2weber.github.io/DougTyped/search_index.en.js"></script>
  <script src="https://d2weber.github.io/DougTyped/js/site.js"></script>

  




</body>

</html>
